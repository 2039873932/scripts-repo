name: sync_repositories
  
on:  
  schedule:  
    - cron: '0 16 * * *' # 每天的16点执行  
  
jobs:  
  sync:  
    env:  
      PAT: ${{ secrets.PAT }}  
  
    runs-on: ubuntu-latest  
    steps:  
      - name: Checkout  
        uses: actions/checkout@v2  
  
      - name: Set up Python  
        uses: actions/setup-python@v2  
        with:  
          python-version: 3.7  
  
      - name: Install dependencies  
        run: python -m pip install --upgrade pip  
        working-directory: .  
  
      - name: Install requirements  
        run: pip install -r ./requirements.txt  
  
      - name: Working  
        timeout-minutes: 350  
        run: |  
          for repo in "${repositories[@]}"  
          do  
            echo "Syncing repository: $repo"  
            git clone "$repo"  
            cd "$repo"  
            git checkout "$source_branch"  
            git push origin "$source_branch:$destination_branch"  
            cd ..  
          done
